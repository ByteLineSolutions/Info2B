<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contacto - Info.2B</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary: #7c3aed;
      --accent: #06b6d4;
      --success: #10b981;
      --dark: #0f172a;
      --darker: #0a0f1c;
      --light: #f8fafc;
      --gray: #64748b;
      --gray-light: #94a3b8;
      --glass: rgba(255, 255, 255, 0.08);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 50%, #1e293b 100%);
      color: var(--light);
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      min-height: 100vh;
    }

    /* Header */
    header {
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(20px);
      padding: 1.2rem 3rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .logo h1 {
      font-size: 1.6rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    nav {
      display: flex;
      gap: 2rem;
    }

    nav a {
      color: var(--gray-light);
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    nav a:hover {
      color: var(--light);
      background: rgba(37, 99, 235, 0.15);
    }

    nav a.active {
      color: var(--primary);
      background: rgba(37, 99, 235, 0.2);
    }

    /* Hero Section */
    .contact-hero {
      text-align: center;
      padding: 4rem 2rem;
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.08) 0%, transparent 50%);
      position: relative;
    }

    .contact-hero h1 {
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--light) 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .contact-hero p {
      font-size: 1.2rem;
      color: var(--gray-light);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Main Content */
    main {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 0 2rem;
    }

    /* Servicio Seleccionado */
    .servicio-seleccionado {
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.15), rgba(6, 182, 212, 0.1));
      border: 1px solid rgba(37, 99, 235, 0.3);
      padding: 1.5rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      backdrop-filter: blur(10px);
      border-left: 4px solid var(--primary);
    }

    .servicio-seleccionado strong {
      color: var(--primary);
      font-size: 1.1rem;
    }

    .servicio-seleccionado span {
      color: var(--light);
      font-weight: 600;
    }

    /* Form Container */
    .form-container {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 20px;
      padding: 2.5rem;
      margin-bottom: 2rem;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }

    .full {
      grid-column: 1 / -1;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--light);
    }

    input, select, textarea {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background: rgba(15, 23, 42, 0.6);
      color: var(--light);
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    /* Campos Específicos */
    .campos-especificos {
      background: rgba(15, 23, 42, 0.4);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      border: 1px solid rgba(37, 99, 235, 0.2);
      transition: all 0.3s ease;
    }

    .campos-especificos h3 {
      color: var(--primary);
      margin-bottom: 1rem;
      font-size: 1.2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 0.5rem;
    }

    .radio-group, .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      margin-top: 0.5rem;
    }

    .radio-item, .checkbox-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .radio-item input, .checkbox-item input {
      width: auto;
    }

    .sub-group {
      margin-bottom: 1rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
    }

    .sub-group label {
      font-size: 0.9rem;
      color: var(--gray-light);
      margin-bottom: 0.3rem;
    }

    .info-text {
      font-size: 0.85rem;
      color: var(--gray-light);
      margin-top: 0.3rem;
      font-style: italic;
    }

    .note-box {
      background: rgba(6, 182, 212, 0.1);
      border: 1px solid rgba(6, 182, 212, 0.3);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .note-box strong {
      color: var(--accent);
    }

    /* Clase oculto mejorada */
    .oculto {
      display: none !important;
    }

    /* Términos */
    .terminos {
      background: rgba(15, 23, 42, 0.6);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 2rem 0;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .terminos h3 {
      color: var(--primary);
      margin-bottom: 1rem;
    }

    .terminos-checkboxes {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .terminos-item {
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
    }

    .terminos-item input {
      width: auto;
      margin-top: 0.2rem;
    }

    .terminos-item label {
      font-weight: normal;
      color: var(--gray-light);
    }

    .terminos-links {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }

    .terminos-links a {
      color: var(--accent);
      text-decoration: none;
      font-size: 0.9rem;
    }

    .terminos-links a:hover {
      text-decoration: underline;
    }

    /* Botón */
    .btn-submit {
      width: 100%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.1rem;
    }

    .btn-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.4);
    }

    /* Mensaje éxito */
    #mensaje-exito {
      margin-top: 2rem;
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      padding: 1.5rem;
      border-radius: 12px;
      display: none;
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    #btnCopiar {
      background: rgba(15, 23, 42, 0.6);
      color: var(--light);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 0.3rem 0.8rem;
      border-radius: 6px;
      cursor: pointer;
      margin-left: 10px;
      transition: all 0.3s ease;
    }

    #btnCopiar:hover {
      background: rgba(37, 99, 235, 0.3);
    }

    /* Footer */
    footer {
      background: rgba(10, 15, 28, 0.9);
      backdrop-filter: blur(10px);
      text-align: center;
      padding: 3rem 2rem;
      margin-top: 4rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    footer p {
      color: var(--gray);
      margin-bottom: 0.5rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      header {
        padding: 1rem;
        flex-direction: column;
        gap: 1rem;
      }

      nav {
        gap: 1rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .contact-hero h1 {
        font-size: 2.2rem;
      }

      main {
        padding: 0 1rem;
      }

      .form-container {
        padding: 1.5rem;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <h1>Info.2B</h1>
    </div>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="seguimiento.html">Seguimiento</a>
      <a href="blog.html">Blog</a>
      <a href="contacto.html" class="active">Contacto</a>
    </nav>
  </header>

  <section class="contact-hero">
    <h1>Solicitar Servicio</h1>
    <p>Complete la información requerida para su servicio seleccionado</p>
  </section>

  <main>
    <!-- Servicio Seleccionado -->
    <div id="servicioBanner" class="servicio-seleccionado oculto">
      <strong>Servicio seleccionado:</strong>
      <span id="servicioTitulo"></span>
    </div>

    <div class="form-container">
      <form id="formularioContacto">
        <!-- Datos Personales -->
        <div class="form-grid">
          <div class="full">
            <h3>Datos Personales</h3>
          </div>
          
          <div class="form-group">
            <label for="nombre_completo">Nombre completo</label>
            <input type="text" id="nombre_completo" name="nombre_completo" required>
          </div>
          
          <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input type="tel" id="telefono" name="telefono" required>
          </div>
          
          <div class="form-group">
            <label for="dpi">DPI</label>
            <input type="text" id="dpi" name="dpi" required placeholder="Ej. 1234 56789 0101" pattern="^\d{4}\s\d{5}\s\d{4}$">
          </div>
          
          <div class="form-group">
            <label for="correo">Correo electrónico</label>
            <input type="email" id="correo" name="correo" required>
          </div>

          <!-- Nuevos campos para Guatemala -->
          <div class="form-group">
            <label for="departamento">Departamento</label>
            <select id="departamento" name="departamento" required>
              <option value="">-- Seleccione departamento --</option>
              <option value="Alta Verapaz">Alta Verapaz</option>
              <option value="Baja Verapaz">Baja Verapaz</option>
              <option value="Chimaltenango">Chimaltenango</option>
              <option value="Chiquimula">Chiquimula</option>
              <option value="El Progreso">El Progreso</option>
              <option value="Escuintla">Escuintla</option>
              <option value="Guatemala">Guatemala</option>
              <option value="Huehuetenango">Huehuetenango</option>
              <option value="Izabal">Izabal</option>
              <option value="Jalapa">Jalapa</option>
              <option value="Jutiapa">Jutiapa</option>
              <option value="Petén">Petén</option>
              <option value="Quetzaltenango">Quetzaltenango</option>
              <option value="Quiché">Quiché</option>
              <option value="Retalhuleu">Retalhuleu</option>
              <option value="Sacatepéquez">Sacatepéquez</option>
              <option value="San Marcos">San Marcos</option>
              <option value="Santa Rosa">Santa Rosa</option>
              <option value="Sololá">Sololá</option>
              <option value="Suchitepéquez">Suchitepéquez</option>
              <option value="Totonicapán">Totonicapán</option>
              <option value="Zacapa">Zacapa</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="municipio">Municipio</label>
            <select id="municipio" name="municipio" required disabled>
              <option value="">-- Primero seleccione un departamento --</option>
            </select>
          </div>
        </div>

        <!-- Campos Específicos por Servicio -->
        
        <!-- REPARACIÓN COMPLETA -->
        <div id="campos-reparacion" class="campos-especificos oculto">
          <h3>Información Detallada para Reparación</h3>
          
          <!-- CAMPO 1: Tipo de equipo -->
          <div class="form-group">
            <label>¿Qué tipo de equipo necesita reparar?</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="reparacion_laptop" name="tipo_equipo_reparacion" value="Laptop" data-required>
                <label for="reparacion_laptop">Laptop</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="reparacion_pc" name="tipo_equipo_reparacion" value="PC de escritorio" data-required>
                <label for="reparacion_pc">PC de escritorio</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="reparacion_otro" name="tipo_equipo_reparacion" value="Otro" data-required>
                <label for="reparacion_otro">Otro:</label>
                <input type="text" id="reparacion_otro_especificar" name="reparacion_otro_especificar" class="campo-condicional" style="display: none;">
              </div>
            </div>
          </div>
          
          <!-- CAMPO 2: Marca del equipo -->
          <div class="form-group">
            <label for="marca_equipo_reparacion">Marca del equipo</label>
            <select id="marca_equipo_reparacion" name="marca_equipo_reparacion" data-required>
              <option value="">-- Seleccione la marca --</option>
              <option value="Acer">Acer</option>
              <option value="Apple">Apple</option>
              <option value="Asus">Asus</option>
              <option value="Dell">Dell</option>
              <option value="HP">HP</option>
              <option value="Lenovo">Lenovo</option>
              <option value="MSI">MSI</option>
              <option value="Samsung">Samsung</option>
              <option value="Toshiba">Toshiba</option>
              <option value="Huawei">Huawei</option>
              <option value="Xiaomi">Xiaomi</option>
              <option value="Microsoft">Microsoft</option>
              <option value="Otro">Otro</option>
            </select>
          </div>
          
          <!-- CAMPO 3: Modelo específico -->
          <div class="form-group">
            <label for="modelo_reparacion">Modelo del equipo</label>
            <input type="text" id="modelo_reparacion" name="modelo_reparacion" data-required placeholder="Ej: ThinkPad T480, MacBook Pro 2020">
            <div class="info-text">Encuentra el modelo en la etiqueta inferior o en Configuración > Acerca de</div>
          </div>
          
          <!-- CAMPO 4: Número de serie -->
          <div class="form-group">
            <label for="numero_serie_reparacion">Número de serie del equipo</label>
            <input type="text" id="numero_serie_reparacion" name="numero_serie_reparacion" data-required>
            <div class="info-text">Encuentra el número de serie en la etiqueta inferior del equipo</div>
          </div>
          
          <!-- CAMPO 5: Estado de garantía -->
          <div class="form-group">
            <label>¿El equipo tiene garantía activa?</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="garantia_si_reparacion" name="garantia_reparacion" value="Sí, tiene garantía vigente" data-required>
                <label for="garantia_si_reparacion">Sí, tiene garantía vigente</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="garantia_no_reparacion" name="garantia_reparacion" value="No, la garantía expiró o no aplica" data-required>
                <label for="garantia_no_reparacion">No, la garantía expiró o no aplica</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="garantia_nose_reparacion" name="garantia_reparacion" value="No estoy seguro" data-required>
                <label for="garantia_nose_reparacion">No estoy seguro</label>
              </div>
            </div>
          </div>
          
          <!-- CAMPO 6: Motivo sin garantía (condicional) -->
          <div id="motivo_no_garantia" class="form-group oculto">
            <label>¿Por qué no utiliza la garantía?</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="razon_expiro" name="razon_no_garantia" value="La garantía ya expiró">
                <label for="razon_expiro">La garantía ya expiró</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="razon_no_cubierto" name="razon_no_garantia" value="El daño no está cubierto por la garantía">
                <label for="razon_no_cubierto">El daño no está cubierto por la garantía</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="razon_prefiero" name="razon_no_garantia" value="Prefiero servicio técnico especializado">
                <label for="razon_prefiero">Prefiero servicio técnico especializado</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="razon_otro" name="razon_no_garantia" value="Otro motivo">
                <label for="razon_otro">Otro motivo:</label>
                <input type="text" id="otro_razon_garantia" name="otro_razon_garantia" class="campo-condicional" style="display: none;">
              </div>
            </div>
          </div>
          
          <!-- CAMPO 7: Tipo de falla principal -->
          <div class="form-group">
            <label for="tipo_falla_reparacion">¿Qué problema presenta el equipo?</label>
            <select id="tipo_falla_reparacion" name="tipo_falla_reparacion" data-required>
              <option value="">-- Seleccione el tipo de falla --</option>
              <option value="No enciende">No enciende</option>
              <option value="Pantalla negra/azul">Pantalla negra/azul</option>
              <option value="Muy lento o se traba">Muy lento o se traba</option>
              <option value="Se sobrecalienta">Se sobrecalienta</option>
              <option value="Problemas de sonido">Problemas de sonido</option>
              <option value="Puerto USB/HDMI no funciona">Puerto USB/HDMI no funciona</option>
              <option value="Batería no carga">Batería no carga</option>
              <option value="No conecta a internet">No conecta a internet</option>
              <option value="Teclado/touchpad no funciona">Teclado/touchpad no funciona</option>
              <option value="Otro problema">Otro problema</option>
            </select>
          </div>
          
          <!-- CAMPO 8: Descripción detallada del problema -->
          <div class="form-group">
            <label>Cuéntanos más sobre el problema:</label>
            
            <div class="sub-group">
              <label>¿Cuándo empezó el problema?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="problema_semana" name="cuando_problema" value="Hace menos de 1 semana" data-required>
                  <label for="problema_semana">Hace menos de 1 semana</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="problema_mes" name="cuando_problema" value="Hace 1-4 semanas" data-required>
                  <label for="problema_mes">Hace 1-4 semanas</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="problema_mas_mes" name="cuando_problema" value="Hace más de 1 mes" data-required>
                  <label for="problema_mas_mes">Hace más de 1 mes</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="problema_nose" name="cuando_problema" value="No estoy seguro" data-required>
                  <label for="problema_nose">No estoy seguro</label>
                </div>
              </div>
            </div>
            
            <div class="sub-group">
              <label>¿El problema es constante o aparece a veces?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="problema_constante" name="frecuencia_problema" value="Siempre está presente" data-required>
                  <label for="problema_constante">Siempre está presente</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="problema_intermitente" name="frecuencia_problema" value="Aparece y desaparece" data-required>
                  <label for="problema_intermitente">Aparece y desaparece</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="problema_ciertas" name="frecuencia_problema" value="Solo en ciertas situaciones" data-required>
                  <label for="problema_ciertas">Solo en ciertas situaciones</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="problema_frecuencia_nose" name="frecuencia_problema" value="No estoy seguro" data-required>
                  <label for="problema_frecuencia_nose">No estoy seguro</label>
                </div>
              </div>
            </div>
            
            <div class="sub-group">
              <label>¿Ya intentó solucionarlo?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="intento_si" name="intento_solucion" value="Sí, pero no funcionó" data-required>
                  <label for="intento_si">Sí, pero no funcionó</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="intento_no" name="intento_solucion" value="No, es la primera vez" data-required>
                  <label for="intento_no">No, es la primera vez</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="intento_reinicio" name="intento_solucion" value="Solo reinicié el equipo" data-required>
                  <label for="intento_reinicio">Solo reinicié el equipo</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="intento_otro" name="intento_solucion" value="Otro" data-required>
                  <label for="intento_otro">Otro:</label>
                  <input type="text" id="otro_intento" name="otro_intento" class="campo-condicional" style="display: none;">
                </div>
              </div>
            </div>
          </div>
          
          <!-- CAMPO 9: Recuperación de datos -->
          <div class="form-group">
            <label>¿Necesita recuperar archivos importantes?</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="recuperacion_si" name="recuperacion_datos_reparacion" value="Sí, tengo archivos importantes por recuperar" data-required>
                <label for="recuperacion_si">Sí, tengo archivos importantes por recuperar</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="recuperacion_no" name="recuperacion_datos_reparacion" value="No, solo necesito reparar el equipo" data-required>
                <label for="recuperacion_no">No, solo necesito reparar el equipo</label>
              </div>
            </div>
            <div class="info-text">Si selecciona "Sí", nos contactaremos para coordinar la recuperación</div>
          </div>
          
          <!-- CAMPO 10: Antecedentes del equipo (opcional) -->
          <div class="form-group">
            <label>Información adicional (opcional):</label>
            
            <div class="sub-group">
              <label>¿Ha tenido reparaciones anteriores?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="reparaciones_si" name="reparaciones_anteriores" value="Sí, ha sido reparado antes">
                  <label for="reparaciones_si">Sí, ha sido reparado antes</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="reparaciones_no" name="reparaciones_anteriores" value="No, es la primera vez">
                  <label for="reparaciones_no">No, es la primera vez</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="reparaciones_nose" name="reparaciones_anteriores" value="No estoy seguro">
                  <label for="reparaciones_nose">No estoy seguro</label>
                </div>
              </div>
            </div>
            
            <div class="sub-group">
              <label>¿El equipo sufrió golpes o caídas?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="golpes_si_reciente" name="golpes_caidas" value="Sí, recientemente">
                  <label for="golpes_si_reciente">Sí, recientemente</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="golpes_si_tiempo" name="golpes_caidas" value="Sí, hace tiempo">
                  <label for="golpes_si_tiempo">Sí, hace tiempo</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="golpes_no" name="golpes_caidas" value="No, nunca">
                  <label for="golpes_no">No, nunca</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="golpes_nose" name="golpes_caidas" value="No estoy seguro">
                  <label for="golpes_nose">No estoy seguro</label>
                </div>
              </div>
            </div>
            
            <div class="sub-group">
              <label>¿Se derramó líquido sobre el equipo?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="liquido_si_reciente" name="derrame_liquido" value="Sí, recientemente">
                  <label for="liquido_si_reciente">Sí, recientemente</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="liquido_si_tiempo" name="derrame_liquido" value="Sí, hace tiempo">
                  <label for="liquido_si_tiempo">Sí, hace tiempo</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="liquido_no" name="derrame_liquido" value="No, nunca">
                  <label for="liquido_no">No, nunca</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="liquido_nose" name="derrame_liquido" value="No estoy seguro">
                  <label for="liquido_nose">No estoy seguro</label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- MANTENIMIENTO -->
        <div id="campos-mantenimiento" class="campos-especificos oculto">
          <h3>Información para Mantenimiento</h3>
          
          <div class="form-group">
            <label>Tipo de equipo</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="mant_laptop" name="tipo_equipo_mantenimiento" value="Laptop" data-required>
                <label for="mant_laptop">Laptop</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="mant_pc" name="tipo_equipo_mantenimiento" value="PC de escritorio" data-required>
                <label for="mant_pc">PC de escritorio</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="mant_servidor" name="tipo_equipo_mantenimiento" value="Servidor" data-required>
                <label for="mant_servidor">Servidor</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>Cantidad de equipos</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="cant_1" name="cantidad_equipos" value="1 equipo" data-required>
                <label for="cant_1">1 equipo</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="cant_2_5" name="cantidad_equipos" value="2-5 equipos" data-required>
                <label for="cant_2_5">2-5 equipos</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="cant_6_10" name="cantidad_equipos" value="6-10 equipos" data-required>
                <label for="cant_6_10">6-10 equipos</label>
              </div>
            </div>
          </div>
        </div>

        <!-- FORMATEO -->
        <div id="campos-formateo" class="campos-especificos oculto">
          <h3>Información para Formateo</h3>
          
          <div class="form-group">
            <label>Sistema operativo requerido</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="win10" name="sistema_operativo" value="Windows 10" data-required>
                <label for="win10">Windows 10</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="win11" name="sistema_operativo" value="Windows 11" data-required>
                <label for="win11">Windows 11</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="linux" name="sistema_operativo" value="Linux" data-required>
                <label for="linux">Linux</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>¿Necesita respaldo de archivos?</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="respaldo_si" name="respaldo" value="Sí" data-required>
                <label for="respaldo_si">Sí</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="respaldo_no" name="respaldo" value="No" data-required>
                <label for="respaldo_no">No</label>
              </div>
            </div>
          </div>
        </div>

        <!-- CÁMARAS -->
        <div id="campos-camaras" class="campos-especificos oculto">
          <h3>Información para Cámaras de Seguridad</h3>
          
          <div class="form-group">
            <label>Tipo de propiedad</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="casa" name="tipo_propiedad" value="Casa" data-required>
                <label for="casa">Casa</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="apartamento" name="tipo_propiedad" value="Apartamento" data-required>
                <label for="apartamento">Apartamento</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="local" name="tipo_propiedad" value="Local comercial" data-required>
                <label for="local">Local comercial</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="cantidad_camaras">Número de cámaras</label>
            <input type="number" id="cantidad_camaras" name="cantidad_camaras" min="1" data-required>
          </div>
        </div>

        <!-- SOPORTE TÉCNICO -->
        <div id="campos-soporte" class="campos-especificos oculto">
          <h3>Información para Soporte Técnico</h3>
          
          <div class="form-group">
            <label>Tipo de problema</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="problema_software" name="tipo_problema" value="Software" data-required>
                <label for="problema_software">Software</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="problema_hardware" name="tipo_problema" value="Hardware" data-required>
                <label for="problema_hardware">Hardware</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="problema_red" name="tipo_problema" value="Red/Internet" data-required>
                <label for="problema_red">Red/Internet</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>Urgencia del servicio</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="urgencia_alta" name="urgencia" value="Alta" data-required>
                <label for="urgencia_alta">Alta (hoy mismo)</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="urgencia_media" name="urgencia" value="Media" data-required>
                <label for="urgencia_media">Media (esta semana)</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="urgencia_baja" name="urgencia" value="Baja" data-required>
                <label for="urgencia_baja">Baja (cuando sea posible)</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Términos y Condiciones -->
        <div class="terminos">
          <h3>Aceptación de Términos</h3>
          <div class="terminos-checkboxes">
            <div class="terminos-item">
              <input type="checkbox" id="acepto_politicas" name="acepto_politicas" required>
              <label for="acepto_politicas">He leído y acepto las políticas de privacidad</label>
            </div>
            <div class="terminos-item">
              <input type="checkbox" id="acepto_terminos" name="acepto_terminos" required>
              <label for="acepto_terminos">Acepto los términos y condiciones del servicio</label>
            </div>
            <div class="terminos-item">
              <input type="checkbox" id="autorizo_datos" name="autorizo_datos" required>
              <label for="autorizo_datos">Autorizo el tratamiento de mis datos personales</label>
            </div>
          </div>
          <div class="terminos-links">
            <a href="politicas.html" target="_blank">Políticas de privacidad</a>
            <a href="terminos.html" target="_blank">Términos y condiciones</a>
          </div>
        </div>

        <!-- Campo oculto para servicio solicitado -->
        <input type="hidden" id="servicio_solicitado" name="servicio_solicitado">

        <button type="submit" class="btn-submit">Enviar Solicitud</button>
      </form>
    </div>

    <div id="mensaje-exito"></div>
  </main>

  <footer>
    <p>&copy; 2025 Info.2B - Soluciones Tecnológicas Profesionales</p>
    <p>Expertos en reparación y mantenimiento de equipos</p>
  </footer>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBJoYFUAJLkaeXA4Lu6T_GujtIgs96Ka0I",
      authDomain: "info2b-firebase.firebaseapp.com",
      projectId: "info2b-firebase",
      storageBucket: "info2b-firebase.appspot.com",
      messagingSenderId: "660484913472",
      appId: "1:660484913472:web:e6aee88dc824a0c3e362a5"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Datos de municipios por departamento
    const municipiosPorDepartamento = {
      "Alta Verapaz": [
        "Cobán", "Santa Cruz Verapaz", "San Cristóbal Verapaz", "Tactic", "Tamahú",
        "San Miguel Tucurú", "Panzós", "Senahú", "San Pedro Carchá", "San Juan Chamelco",
        "Lanquín", "Cahabón", "Chisec", "Chahal", "Fray Bartolomé de las Casas",
        "Santa Catalina La Tinta", "Raxruhá"
      ],
      "Baja Verapaz": [
        "Salamá", "San Miguel Chicaj", "Rabinal", "Cubulco", "Granados", 
        "Santa Cruz El Chol", "San Jerónimo", "Purulhá"
      ],
      "Chimaltenango": [
        "Chimaltenango", "San José Poaquil", "San Martín Jilotepeque", "Comalapa",
        "Santa Apolonia", "Tecpán Guatemala", "Patzún", "Pochuta", "Patzicía",
        "Santa Cruz Balanyá", "Acatenango", "San Pedro Yepocapa", "San Andrés Itzapa",
        "Parramos", "Zaragoza", "El Tejar"
      ],
      "Chiquimula": [
        "Chiquimula", "San José La Arada", "San Juan Ermita", "Jocotán",
        "Camotán", "Olopa", "Esquipulas", "Concepción Las Minas", 
        "Quezaltepeque", "San Jacinto", "Ipala"
      ],
      "El Progreso": [
        "Guastatoya", "Morazán", "San Agustín Acasaguastlán", "San Cristóbal Acasaguastlán",
        "El Jícaro", "Sansare", "Sanarate", "San Antonio La Paz"
      ],
      "Escuintla": [
        "Escuintla", "Santa Lucía Cotzumalguapa", "La Democracia", "Siquinalá",
        "Masagua", "Tiquisate", "La Gomera", "Guanagazapa", "San José",
        "Iztapa", "Palín", "San Vicente Pacaya", "Nueva Concepción"
      ],
      "Guatemala": [
        "Guatemala", "Santa Catarina Pinula", "San José Pinula", "San José del Golfo",
        "Palencia", "Chinautla", "San Pedro Ayampuc", "Mixco", "San Pedro Sacatepéquez",
        "San Juan Sacatepéquez", "San Raymundo", "Chuarrancho", "Fraijanes", 
        "Amatitlán", "Villa Nueva", "Villa Canales", "San Miguel Petapa"
      ],
      "Huehuetenango": [
        "Huehuetenango", "Chiantla", "Malacatancito", "Cuilco", "Nentón",
        "San Pedro Necta", "Jacaltenango", "Soloma", "Ixtahuacán", "Santa Bárbara",
        "La Libertad", "La Democracia", "San Miguel Acatán", "San Rafael La Independencia",
        "Todos Santos Cuchumatán", "San Juan Atitán", "Santa Eulalia", "San Mateo Ixtatán",
        "Colotenango", "San Sebastián Huehuetenango", "Tectitán", "Concepción Huista",
        "San Juan Ixcoy", "San Antonio Huista", "San Sebastián Coatán", "Barillas",
        "Aguacatán", "San Rafael Petzal", "San Gaspar Ixchil", "Santiago Chimaltenango",
        "Santa Ana Huista", "Unión Cantinil"
      ],
      "Izabal": [
        "Puerto Barrios", "Livingston", "El Estor", "Morales", "Los Amates"
      ],
      "Jalapa": [
        "Jalapa", "San Pedro Pinula", "San Luis Jilotepeque", "San Manuel Chaparrón",
        "San Carlos Alzatate", "Monjas", "Mataquescuintla"
      ],
      "Jutiapa": [
        "Jutiapa", "El Progreso", "Santa Catarina Mita", "Agua Blanca", 
        "Asunción Mita", "Yupiltepeque", "Atescatempa", "Jerez", "El Adelanto",
        "Zapotitlán", "Comapa", "Jalpatagua", "Conguaco", "Moyuta", "Pasaco",
        "San José Acatempa", "Quesada"
      ],
      "Petén": [
        "Flores", "San José", "San Benito", "San Andrés", "La Libertad",
        "San Francisco", "Santa Ana", "Dolores", "San Luis", "Sayaxché",
        "Melchor de Mencos", "Poptún", "Las Cruces", "El Chal"
      ],
      "Quetzaltenango": [
        "Quetzaltenango", "Salcajá", "Olintepeque", "San Carlos Sija", 
        "Sibilia", "Cabricán", "Cajolá", "San Miguel Siguilá", "Ostuncalco",
        "San Mateo", "Concepción Chiquirichapa", "San Martín Sacatepéquez",
        "Almolonga", "Cantel", "Huitán", "Zunil", "Colomba", "San Francisco La Unión",
        "El Palmar", "Coatepeque", "Génova", "Flores Costa Cuca", "La Esperanza",
        "Palestina de Los Altos"
      ],
      "Quiché": [
        "Santa Cruz del Quiché", "Chiché", "Chinique", "Zacualpa", 
        "Chajul", "Chichicastenango", "Patzité", "San Antonio Ilotenango",
        "San Pedro Jocopilas", "Cunén", "San Juan Cotzal", "Joyabaj",
        "Nebaj", "San Andrés Sajcabajá", "Uspantán", "Sacapulas", 
        "San Bartolomé Jocotenango", "Canillá", "Chicamán", "Ixcán",
        "Pachalum"
      ],
      "Retalhuleu": [
        "Retalhuleu", "San Sebastián", "Santa Cruz Muluá", "San Martín Zapotitlán",
        "San Felipe", "San Andrés Villa Seca", "Champerico", "Nuevo San Carlos",
        "El Asintal"
      ],
      "Sacatepéquez": [
        "Antigua Guatemala", "Jocotenango", "Pastores", "Sumpango",
        "Santo Domingo Xenacoj", "Santiago Sacatepéquez", "San Bartolomé Milpas Altas",
        "San Lucas Sacatepéquez", "Santa Lucía Milpas Altas", "Magdalena Milpas Altas",
        "Santa María de Jesús", "Ciudad Vieja", "San Miguel Dueñas", "Alotenango",
        "San Antonio Aguas Calientes", "Santa Catarina Barahona"
      ],
      "San Marcos": [
        "San Marcos", "San Pedro Sacatepéquez", "San Antonio Sacatepéquez",
        "Comitancillo", "San Miguel Ixtahuacán", "Concepción Tutuapa",
        "Tacaná", "Sibinal", "Tajumulco", "Tejutla", "San Rafael Pie de la Cuesta",
        "Nuevo Progreso", "El Tumbador", "El Rodeo", "Malacatán", "Catarina",
        "Ayutla", "Ocós", "San Pablo", "El Quetzal", "La Reforma",
        "Pajapita", "Ixchiguán", "San José Ojetenam", "San Cristóbal Cucho",
        "Sipacapa", "Esquipulas Palo Gordo", "Río Blanco", "San Lorenzo"
      ],
      "Santa Rosa": [
        "Cuilapa", "Barberena", "Santa Rosa de Lima", "Casillas", 
        "San Rafael Las Flores", "Oratorio", "San Juan Tecuaco", 
        "Chiquimulilla", "Taxisco", "Santa María Ixhuatán", 
        "Guazacapán", "Santa Cruz Naranjo", "Pueblo Nuevo Viñas", 
        "Nueva Santa Rosa"
      ],
      "Sololá": [
        "Sololá", "San José Chacayá", "Santa María Visitación", 
        "Santa Lucía Utatlán", "Nahualá", "Santa Catarina Ixtahuacán",
        "Santa Clara La Laguna", "Concepción", "San Andrés Semetabaj",
        "Panajachel", "Santa Catarina Palopó", "San Antonio Palopó",
        "San Lucas Tolimán", "Santa Cruz La Laguna", "San Pablo La Laguna",
        "San Marcos La Laguna", "San Juan La Laguna", "San Pedro La Laguna",
        "Santiago Atitlán"
      ],
      "Suchitepéquez": [
        "Mazatenango", "Cuyotenango", "San Francisco Zapotitlán", 
        "San Bernardino", "San José El Ídolo", "Santo Domingo Suchitepéquez",
        "San Lorenzo", "Samayac", "San Pablo Jocopilas", "San Antonio Suchitepéquez",
        "San Miguel Panán", "San Gabriel", "Chicacao", "Patulul", 
        "Santa Bárbara", "San Juan Bautista", "Santo Tomás La Unión",
        "Zunilito", "Pueblo Nuevo", "Río Bravo"
      ],
      "Totonicapán": [
        "Totonicapán", "San Cristóbal Totonicapán", "San Francisco El Alto",
        "San Andrés Xecul", "Momostenango", "Santa María Chiquimula",
        "Santa Lucía La Reforma", "San Bartolo"
      ],
      "Zacapa": [
        "Zacapa", "Estanzuela", "Río Hondo", "Gualán", "Teculután",
        "Usumatlán", "Cabañas", "San Diego", "La Unión", "Huité"
      ]
    };

    // Elementos DOM
    const form = document.getElementById("formularioContacto");
    const mensajeExito = document.getElementById("mensaje-exito");
    const servicioBanner = document.getElementById("servicioBanner");
    const servicioTitulo = document.getElementById("servicioTitulo");
    const servicioInput = document.getElementById("servicio_solicitado");
    const selectDepartamento = document.getElementById("departamento");
    const selectMunicipio = document.getElementById("municipio");

    // Configurar dependencia departamento-municipio
    selectDepartamento.addEventListener("change", function() {
      const departamentoSeleccionado = this.value;
      selectMunicipio.innerHTML = '<option value="">-- Seleccione municipio --</option>';
      
      if (departamentoSeleccionado && municipiosPorDepartamento[departamentoSeleccionado]) {
        selectMunicipio.disabled = false;
        municipiosPorDepartamento[departamentoSeleccionado].forEach(municipio => {
          const option = document.createElement("option");
          option.value = municipio;
          option.textContent = municipio;
          selectMunicipio.appendChild(option);
        });
      } else {
        selectMunicipio.disabled = true;
        selectMunicipio.innerHTML = '<option value="">-- Primero seleccione un departamento --</option>';
      }
    });

    // Detectar servicio seleccionado al cargar la página
    document.addEventListener("DOMContentLoaded", function() {
      const servicioData = sessionStorage.getItem("servicio_seleccionado");
      
      if (servicioData) {
        const servicio = JSON.parse(servicioData);
        
        // Mostrar banner del servicio
        const precioLimpio = servicio.precio.replace('Desde ', '').trim();
        const textoServicio = `${servicio.titulo} - Q${precioLimpio}`;
        servicioTitulo.textContent = textoServicio;
        servicioInput.value = textoServicio;
        servicioBanner.classList.remove("oculto");

        // Mostrar campos específicos según el tipo de servicio
        mostrarCamposEspecificos(servicio.tipo);
        
        // Configurar campos condicionales después de mostrar los campos
        setTimeout(() => {
          configurarCamposCondicionales();
        }, 100);
      }
    });

    function mostrarCamposEspecificos(tipoServicio) {
      // Deshabilitar required de todos los campos específicos primero
      document.querySelectorAll(".campos-especificos input, .campos-especificos select, .campos-especificos textarea").forEach(element => {
        element.required = false;
      });
      
      // Ocultar todos los campos específicos visualmente
      document.querySelectorAll(".campos-especificos").forEach(div => {
        div.classList.add("oculto");
      });

      // Mostrar solo los campos del servicio correspondiente y habilitar required
      let camposActivos = null;
      switch(tipoServicio) {
        case "reparacion":
          camposActivos = document.getElementById("campos-reparacion");
          break;
        case "mantenimiento":
          camposActivos = document.getElementById("campos-mantenimiento");
          break;
        case "formateo":
          camposActivos = document.getElementById("campos-formateo");
          break;
        case "camaras":
          camposActivos = document.getElementById("campos-camaras");
          break;
        case "soporte":
          camposActivos = document.getElementById("campos-soporte");
          break;
      }

      if (camposActivos) {
        camposActivos.classList.remove("oculto");
        // Habilitar required solo en los campos con data-required
        camposActivos.querySelectorAll("[data-required]").forEach(element => {
          element.required = true;
        });
      }
    }

    function configurarCamposCondicionales() {
      // Campo "Otro" en tipo de equipo
      const reparacionOtro = document.getElementById('reparacion_otro');
      if (reparacionOtro) {
        reparacionOtro.addEventListener('change', function() {
          const campoOtro = document.getElementById('reparacion_otro_especificar');
          if (this.checked) {
            campoOtro.style.display = 'inline-block';
            campoOtro.setAttribute('data-required', 'true');
            campoOtro.required = true;
          } else {
            campoOtro.style.display = 'none';
            campoOtro.removeAttribute('data-required');
            campoOtro.required = false;
            campoOtro.value = '';
          }
        });
      }
      
      // Campo motivo sin garantía
      const garantiaNo = document.getElementById('garantia_no_reparacion');
      if (garantiaNo) {
        garantiaNo.addEventListener('change', function() {
          const motivoGarantia = document.getElementById('motivo_no_garantia');
          if (this.checked) {
            motivoGarantia.classList.remove('oculto');
          } else {
            motivoGarantia.classList.add('oculto');
          }
        });
      }
      
      // Campo "Otro motivo" en garantía
      const razonOtro = document.getElementById('razon_otro');
      if (razonOtro) {
        razonOtro.addEventListener('change', function() {
          const campoOtroRazon = document.getElementById('otro_razon_garantia');
          if (this.checked) {
            campoOtroRazon.style.display = 'inline-block';
          } else {
            campoOtroRazon.style.display = 'none';
            campoOtroRazon.value = '';
          }
        });
      }
      
      // Campo "Otro" en intentos de solución
      const intentoOtro = document.getElementById('intento_otro');
      if (intentoOtro) {
        intentoOtro.addEventListener('change', function() {
          const campoOtroIntento = document.getElementById('otro_intento');
          if (this.checked) {
            campoOtroIntento.style.display = 'inline-block';
            campoOtroIntento.setAttribute('data-required', 'true');
            campoOtroIntento.required = true;
          } else {
            campoOtroIntento.style.display = 'none';
            campoOtroIntento.removeAttribute('data-required');
            campoOtroIntento.required = false;
            campoOtroIntento.value = '';
          }
        });
      }
    }

    function generarCodigoSeguimiento() {
      const letras = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let codigo = "";
      for (let i = 0; i < 7; i++) {
        codigo += letras.charAt(Math.floor(Math.random() * letras.length));
      }
      return codigo;
    }

    // Enviar formulario
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const servicioData = sessionStorage.getItem("servicio_seleccionado");
      const servicio = servicioData ? JSON.parse(servicioData) : { titulo: '', tipo: '' };

      // Validar que se haya seleccionado departamento y municipio
      if (!selectDepartamento.value || !selectMunicipio.value) {
        alert("Por favor, seleccione su departamento y municipio.");
        return;
      }

      // Recolectar datos básicos
      const data = {
        nombre_completo: form.nombre_completo.value.trim(),
        telefono: form.telefono.value.trim(),
        dpi: form.dpi.value.trim(),
        correo: form.correo.value.trim(),
        pais: "Guatemala",
        departamento: selectDepartamento.value,
        municipio: selectMunicipio.value,
        servicio_solicitado: servicioInput.value.trim(),
        acepto_politicas: form.acepto_politicas.checked,
        acepto_terminos: form.acepto_terminos.checked,
        autorizo_datos: form.autorizo_datos.checked,
        estado: "Pendiente",
        fecha_ingreso: serverTimestamp(),
        codigo_seguimiento: generarCodigoSeguimiento(),
        tipo_servicio: servicio.tipo || 'general'
      };

      // Recolectar datos específicos según el tipo de servicio
      switch(servicio.tipo) {
        case 'reparacion':
          data.tipo_equipo_reparacion = document.querySelector('input[name="tipo_equipo_reparacion"]:checked')?.value || '';
          data.marca_equipo_reparacion = document.getElementById('marca_equipo_reparacion')?.value || '';
          data.modelo_reparacion = document.getElementById('modelo_reparacion')?.value || '';
          data.numero_serie_reparacion = document.getElementById('numero_serie_reparacion')?.value || '';
          data.garantia_reparacion = document.querySelector('input[name="garantia_reparacion"]:checked')?.value || '';
          data.razon_no_garantia = document.querySelector('input[name="razon_no_garantia"]:checked')?.value || '';
          data.otro_razon_garantia = document.getElementById('otro_razon_garantia')?.value || '';
          data.tipo_falla_reparacion = document.getElementById('tipo_falla_reparacion')?.value || '';
          data.cuando_problema = document.querySelector('input[name="cuando_problema"]:checked')?.value || '';
          data.frecuencia_problema = document.querySelector('input[name="frecuencia_problema"]:checked')?.value || '';
          data.intento_solucion = document.querySelector('input[name="intento_solucion"]:checked')?.value || '';
          data.otro_intento = document.getElementById('otro_intento')?.value || '';
          data.recuperacion_datos_reparacion = document.querySelector('input[name="recuperacion_datos_reparacion"]:checked')?.value || '';
          data.reparaciones_anteriores = document.querySelector('input[name="reparaciones_anteriores"]:checked')?.value || '';
          data.golpes_caidas = document.querySelector('input[name="golpes_caidas"]:checked')?.value || '';
          data.derrame_liquido = document.querySelector('input[name="derrame_liquido"]:checked')?.value || '';
          break;
        case 'mantenimiento':
          data.tipo_equipo_mantenimiento = document.querySelector('input[name="tipo_equipo_mantenimiento"]:checked')?.value || '';
          data.cantidad_equipos = document.querySelector('input[name="cantidad_equipos"]:checked')?.value || '';
          break;
        case 'formateo':
          data.sistema_operativo = document.querySelector('input[name="sistema_operativo"]:checked')?.value || '';
          data.respaldo = document.querySelector('input[name="respaldo"]:checked')?.value || '';
          break;
        case 'camaras':
          data.tipo_propiedad = document.querySelector('input[name="tipo_propiedad"]:checked')?.value || '';
          data.cantidad_camaras = document.getElementById('cantidad_camaras')?.value || '';
          break;
        case 'soporte':
          data.tipo_problema = document.querySelector('input[name="tipo_problema"]:checked')?.value || '';
          data.urgencia = document.querySelector('input[name="urgencia"]:checked')?.value || '';
          break;
      }

      try {
        await addDoc(collection(db, "trabajos"), data);

        const nombre = data.nombre_completo.split(" ")[0];
        mensajeExito.innerHTML = `
          <strong>¡Gracias, ${nombre}!</strong> Tu solicitud fue enviada correctamente.<br><br>
           Código de seguimiento:
          <code id="codigoCopiar" style="background:rgba(15,23,42,0.6);padding:5px;border-radius:5px;color:var(--success);">${data.codigo_seguimiento}</code>
          <button id="btnCopiar" style="margin-left:10px;padding:3px 8px;font-size:0.9rem;cursor:pointer;background:rgba(37,99,235,0.3);color:var(--light);border:1px solid rgba(255,255,255,0.2);border-radius:6px;">📋 Copiar</button>
          <br><br>
          Pronto nos pondremos en contacto contigo. 
        `;
        mensajeExito.style.display = "block";
        form.reset();
        
        // Resetear departamento y municipio
        selectMunicipio.disabled = true;
        selectMunicipio.innerHTML = '<option value="">-- Primero seleccione un departamento --</option>';
        
        // Ocultar campos específicos después del envío
        document.querySelectorAll(".campos-especificos").forEach(div => {
          div.classList.add("oculto");
        });
        servicioBanner.classList.add("oculto");

        // Configurar botón copiar
        const btnCopiar = document.getElementById("btnCopiar");
        const codigoSpan = document.getElementById("codigoCopiar");
        if (btnCopiar && codigoSpan) {
          btnCopiar.addEventListener("click", () => {
            navigator.clipboard.writeText(codigoSpan.textContent)
              .then(() => { 
                btnCopiar.textContent = " Copiado"; 
                setTimeout(() => { btnCopiar.textContent = " Copiar"; }, 2000); 
              })
              .catch(() => { btnCopiar.textContent = " Error"; });
          });
        }

      } catch (error) {
        console.error("Error al enviar formulario:", error);
        mensajeExito.innerHTML = `<span style="color:#ff5252;"> Error al enviar: ${error.message}</span>`;
        mensajeExito.style.display = "block";
      }
    });
  </script>
</body>
</html>
